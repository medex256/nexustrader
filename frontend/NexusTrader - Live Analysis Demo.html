<!DOCTYPE html>
<!-- saved from url=(0114)file:///C:/Users/Madi/Documents/season_25-26/academic_25-26/FYP_multi_agent_trading/nexustrader/frontend/demo.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NexusTrader - Live Analysis Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3em;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .input-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .input-group input {
            flex: 1;
            padding: 15px 20px;
            font-size: 1.1em;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            border-color: #667eea;
        }

        .input-group button {
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 600;
            color: white;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .input-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .input-group button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .status-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: none;
        }

        .status-section.active {
            display: block;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .agent-status {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .agent-status.active {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-left: 4px solid #667eea;
        }

        .agent-status.completed {
            opacity: 0.6;
        }

        .agent-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.2em;
            transition: all 0.3s;
        }

        .agent-status.active .agent-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            animation: pulse 1.5s infinite;
        }

        .agent-status.completed .agent-icon {
            background: #4caf50;
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .agent-name {
            font-weight: 600;
            font-size: 1.1em;
            color: #333;
        }

        .results-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            display: none;
        }

        .results-section.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .results-header h2 {
            font-size: 2em;
            color: #333;
        }

        .recommendation {
            padding: 20px;
            border-radius: 10px;
            font-size: 1.3em;
            font-weight: 700;
            text-align: center;
            margin-bottom: 25px;
        }

        .recommendation.buy {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
        }

        .recommendation.sell {
            background: linear-gradient(135deg, #f44336 0%, #da190b 100%);
            color: white;
        }

        .recommendation.hold {
            background: linear-gradient(135deg, #ff9800 0%, #fb8c00 100%);
            color: white;
        }

        .report-section {
            margin-bottom: 25px;
        }

        .report-section h3 {
            font-size: 1.3em;
            color: #667eea;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .report-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.8;
            color: #555;
            white-space: pre-wrap;
        }

        .chart-container {
            margin: 25px 0;
            text-align: center;
        }

        .chart-container img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .strategy-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .strategy-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .strategy-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
        }

        .strategy-item label {
            display: block;
            font-size: 0.9em;
            color: #888;
            margin-bottom: 5px;
        }

        .strategy-item value {
            display: block;
            font-size: 1.2em;
            font-weight: 700;
            color: #333;
        }

        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ NexusTrader</h1>
            <p>AI-Powered Multi-Agent Stock Analysis</p>
        </div>

        <div class="input-section">
            <div class="input-group">
                <input type="text" id="tickerInput" placeholder="Enter stock ticker (e.g., TSLA, AAPL, NVDA)">
                <button id="analyzeBtn" onclick="startAnalysis()">
                    <span id="btnText" style="display: inline;">Analyze Stock</span>
                    <span id="btnSpinner" class="spinner" style="display: none;"></span>
                </button>
            </div>
        </div>

        <div class="status-section active" id="statusSection">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 100%;"></div>
            </div>
            <div id="agentList">
                <div class="agent-status completed" id="agent-fundamental_analyst">
                    <div class="agent-icon">üìä</div>
                    <div class="agent-name">Fundamental Analyst</div>
                </div>
            
                <div class="agent-status completed" id="agent-technical_analyst">
                    <div class="agent-icon">üìà</div>
                    <div class="agent-name">Technical Analyst</div>
                </div>
            
                <div class="agent-status completed" id="agent-sentiment_analyst">
                    <div class="agent-icon">üí¨</div>
                    <div class="agent-name">Sentiment Analyst</div>
                </div>
            
                <div class="agent-status completed" id="agent-news_harvester">
                    <div class="agent-icon">üì∞</div>
                    <div class="agent-name">News Harvester</div>
                </div>
            
                <div class="agent-status completed" id="agent-bull_researcher">
                    <div class="agent-icon">üêÇ</div>
                    <div class="agent-name">Bull Researcher</div>
                </div>
            
                <div class="agent-status completed" id="agent-bear_researcher">
                    <div class="agent-icon">üêª</div>
                    <div class="agent-name">Bear Researcher</div>
                </div>
            
                <div class="agent-status completed" id="agent-research_manager">
                    <div class="agent-icon">üéØ</div>
                    <div class="agent-name">Research Manager</div>
                </div>
            
                <div class="agent-status completed" id="agent-strategy_synthesizer">
                    <div class="agent-icon">‚ö°</div>
                    <div class="agent-name">Strategy Synthesizer</div>
                </div>
            </div>
        </div>

        <div class="results-section active" id="resultsSection">
                <div class="results-header">
                    <h2>Analysis Results for MSFT</h2>
                </div>

                <div class="recommendation buy">
                    üìà 
                    Recommendation: BUY
                </div>
            
                    <div class="chart-container">
                        <img src="./NexusTrader - Live Analysis Demo_files/MSFT_chart.png" alt="Stock Chart for MSFT">
                    </div>
                
                    <div class="report-section">
                        <h3>üìã Investment Recommendation</h3>
                        <div class="report-content">Alright team, I‚Äôve weighed both sides of this debate and reviewed the analysis reports carefully.

The Bull researcher rightly highlights Microsoft's undeniable financial strength ‚Äì a true powerhouse with exceptional profitability, robust liquidity, and minimal debt, all backed by the fundamental analyst's glowing report. Their argument for AI as a massive growth catalyst, driven by strategic overhauls and validated by broader market sentiment, is compelling and supported by our news harvester.

However, the Bear researcher presents valid counterpoints. The high valuation, flagged by our fundamental analyst as a "primary concern," means there's little margin for error. The technical analyst's clear indicators of a "bearish crossover" and "bearish momentum" signal short-term weakness, not just a minor blip. And the broader "AI bubble" concerns, though perhaps overblown for MSFT, still represent a market risk.

Given the strong arguments from both sides, and the directive to avoid defaulting to "Hold," I have to make a definitive call.

**My Recommendation: BUY**

Here‚Äôs why: While the valuation is a valid concern and the short-term technicals show weakness, Microsoft's fundamental strength and long-term growth catalysts in AI are simply too powerful to ignore. The company is a financially "outstanding" powerhouse, generating immense cash flow, and strategically repositioning itself for the next decade of AI-driven revenue. The current technical dip, in this context, offers an opportunity for long-term investors to accumulate shares in a fundamentally sound company with a clear growth trajectory. The risk of missing out on MSFT's continued dominance outweighs the short-term valuation and technical anxieties.

**Investment Plan:**

**Rationale:** This is a strategic long-term BUY, driven by Microsoft's unparalleled financial health, its market leadership, and its aggressive, well-funded pivot into the AI era. The company consistently demonstrates efficient capital utilization and strong cash generation, positioning it for sustained future growth despite current market premiums.

**Risk Factors to Monitor:** We must closely watch the pace and success of MSFT's AI monetization efforts. Any significant slowdown or competitive pressure in AI could impact future growth projections. Furthermore, general "AI bubble" sentiment could lead to broader market corrections affecting even strong players like MSFT. We'll also monitor the high valuation for signs of overextension or if market sentiment shifts negatively for growth stocks.

**Entry/Exit Strategy:** Given the high valuation, I recommend a dollar-cost averaging strategy to mitigate entry risk over time. This allows us to benefit from any further short-term dips while accumulating a position. We should consider re-evaluating our position if there's a sustained deterioration in the company's core financial metrics, a significant failure in AI execution, or if the valuation becomes extremely decoupled from its growth prospects. This is a long-term conviction play; immediate exits would only be considered under extreme, unforeseen circumstances impacting the fundamental thesis.</div>
                    </div>
                
                    <div class="strategy-card">
                        <h3>‚ö° Trading Strategy</h3>
                        <div class="strategy-grid">
                            
                                <div class="strategy-item">
                                    <label>Entry Price</label>
                                    <value>$428</value>
                                </div>
                            
                            
                                <div class="strategy-item">
                                    <label>Take Profit</label>
                                    <value>$642</value>
                                </div>
                            
                            
                                <div class="strategy-item">
                                    <label>Stop Loss</label>
                                    <value>$363.8</value>
                                </div>
                            
                            
                                <div class="strategy-item">
                                    <label>Position Size</label>
                                    <value>7%</value>
                                </div>
                            
                        </div>
                        
                            <div class="report-content" style="margin-top: 15px;">
                                <strong>Rationale:</strong> This strategic long-term BUY is driven by MSFT's unparalleled financial health, market leadership, and aggressive AI pivot. Dollar-cost averaging is recommended to mitigate valuation concerns, with fundamental thesis deterioration serving as the primary stop-loss trigger.
                            </div>
                        
                    </div>
                
                            <div class="report-section">
                                <h3>üìä Fundamental Analysis</h3>
                                <div class="report-content">Microsoft (MSFT) demonstrates outstanding financial health.

**Profitability** is exceptional, with net income consistently growing (e.g., ~$88B in 2023 to ~$101B in 2024). The company boasts a high profit margin of 35.7% and an impressive Return on Equity (ROE) of over 32%, indicating highly efficient capital utilization.

**Liquidity** is solid, reflected by a current ratio of 1.40, which is healthy for a company of its size and stability. MSFT also maintains substantial cash and short-term investments.

**Solvency** is robust, with a very low debt-to-equity ratio of 33.15%. This signifies minimal reliance on debt and a strong balance sheet. EBITDA generation far exceeds total debt, showcasing excellent debt servicing capacity.

**Efficiency** is excellent, with strong and growing operating cash flow ($136B in 2024) and free cash flow ($71B in 2024), demonstrating its ability to generate significant cash from operations. Increased capital expenditure in 2024, while impacting FCF growth slightly, likely represents strategic investments in growth areas like AI.

The primary **concern** is valuation. MSFT's trailing P/E of 34.6x and Price/Sales of 12.3x are on the higher side, suggesting the market has already priced in substantial future growth. This implies a premium for new investors.

**Overall Assessment:** Financially, MSFT is a powerhouse. It exhibits strong profitability, excellent liquidity, minimal leverage, and robust cash generation. Despite a high valuation, its consistent performance and strong analyst recommendations (overwhelmingly "Buy" and "Strong Buy") underscore its quality as a fundamentally sound company.</div>
                            </div>
                        
                            <div class="report-section">
                                <h3>üìà Technical Analysis</h3>
                                <div class="report-content">Hey there! Let's break down MSFT's technical picture based on the data provided.

Overall, Microsoft appears to be in a short-term bearish or consolidating phase. We're seeing the 20-day Simple Moving Average (SMA) at $513.15 drop slightly below the 50-day SMA at $514.09. This "bearish crossover" often signals a short-term downtrend or a period of weakness.

Looking at the momentum, the 14-day Relative Strength Index (RSI) is at 34.15. This is below the 50-level, indicating bearish momentum, and it's approaching the oversold threshold (typically below 30), suggesting the stock has seen some significant selling pressure recently. The SMAs could also act as dynamic resistance if the price attempts to rally.

While I can't identify specific chart patterns or fixed support/resistance levels without seeing the full chart, the current indicator setup points to continued challenges. Unfortunately, trading volume data wasn't provided, so we can't assess the conviction behind recent price movements.

For the short-term, expect MSFT to likely remain under pressure or consolidate. A bounce could occur if the RSI enters oversold territory, but a sustained recovery would ideally involve the price breaking above these moving averages and the 20-day SMA crossing back above the 50-day SMA.</div>
                            </div>
                        
                            <div class="report-section">
                                <h3>üí¨ Sentiment Analysis</h3>
                                <div class="report-content">Social media sentiment analysis for MSFT is currently unavailable. 
StockTwits API closed to new registrations and Twitter scraping is unreliable. 
Recommend relying on news sentiment and fundamental/technical analysis instead.</div>
                            </div>
                        
                            <div class="report-section">
                                <h3>üì∞ News Analysis</h3>
                                <div class="report-content">Here's an analysis of the latest news for Microsoft (MSFT):

**Key Catalysts and Events:**
Microsoft is proactively shaping its future in the AI era. CEO Satya Nadella is reportedly initiating a significant business model overhaul for AI, appointing veteran Rolf Harms to lead this transformation. This mirrors their successful cloud playbook and signals a deep commitment to monetizing AI. Furthermore, Nvidia's blockbuster earnings have broadly calmed "AI bubble" jitters, boosting confidence in the AI sector and lifting tech stocks, benefiting major AI players like MSFT.

**Sentiment Trend Assessment:**
The overall sentiment for Microsoft is **somewhat bullish to neutral**. While direct news about MSFT is neutral, it highlights a positive strategic direction. The broader market sentiment, invigorated by Nvidia's strong performance, is positive for AI-focused companies, with many articles reflecting this renewed optimism.

**Market-Moving Developments:**
MSFT's strategic repositioning for the AI era, including a business model overhaul, indicates a strong focus on future AI-driven revenue growth. This proactive approach, coupled with the renewed confidence in the AI sector post-Nvidia's earnings, creates a favorable environment for Microsoft, given its substantial investments and partnerships in AI (e.g., OpenAI).

**Risk Factors from News:**
Despite the current optimism, "AI bubble" concerns persist. Voices like AOC warn of "2008-style" risks, suggesting tech giants shouldn't expect bailouts. While Nvidia's forecast offered a temporary reprieve, this underlying risk of market correction in the broader AI sector could still impact MSFT.</div>
                            </div>
                        </div>
    </div>

    <script>
        let eventSource = null;

        const agents = [
            { key: 'fundamental_analyst', name: 'Fundamental Analyst', icon: 'üìä' },
            { key: 'technical_analyst', name: 'Technical Analyst', icon: 'üìà' },
            { key: 'sentiment_analyst', name: 'Sentiment Analyst', icon: 'üí¨' },
            { key: 'news_harvester', name: 'News Harvester', icon: 'üì∞' },
            { key: 'bull_researcher', name: 'Bull Researcher', icon: 'üêÇ' },
            { key: 'bear_researcher', name: 'Bear Researcher', icon: 'üêª' },
            { key: 'research_manager', name: 'Research Manager', icon: 'üéØ' },
            { key: 'strategy_synthesizer', name: 'Strategy Synthesizer', icon: '‚ö°' }
        ];

        function startAnalysis() {
            const ticker = document.getElementById('tickerInput').value.trim().toUpperCase();
            
            if (!ticker) {
                alert('Please enter a stock ticker');
                return;
            }

            // Reset UI
            document.getElementById('statusSection').classList.add('active');
            document.getElementById('resultsSection').classList.remove('active');
            document.getElementById('resultsSection').innerHTML = '';
            document.getElementById('progressFill').style.width = '0%';
            
            // Disable button
            const btn = document.getElementById('analyzeBtn');
            btn.disabled = true;
            document.getElementById('btnText').style.display = 'none';
            document.getElementById('btnSpinner').style.display = 'inline-block';

            // Create agent status list
            const agentList = document.getElementById('agentList');
            agentList.innerHTML = agents.map(agent => `
                <div class="agent-status" id="agent-${agent.key}">
                    <div class="agent-icon">${agent.icon}</div>
                    <div class="agent-name">${agent.name}</div>
                </div>
            `).join('');

            // Connect to SSE endpoint
            if (eventSource) {
                eventSource.close();
            }

            eventSource = new EventSource(`http://127.0.0.1:8000/analyze/stream?ticker=${ticker}`);

            eventSource.onmessage = (event) => {
                const data = JSON.parse(event.data);
                handleEvent(data, ticker);
            };

            eventSource.onerror = (error) => {
                console.error('SSE Error:', error);
                eventSource.close();
                showError('Connection error. Please try again.');
                resetButton();
            };
        }

        function handleEvent(data, ticker) {
            const { status, agent, step, total, result, message } = data;

            switch (status) {
                case 'started':
                    console.log('Analysis started');
                    break;

                case 'processing':
                    updateProgress(step, total);
                    updateAgentStatus(agent);
                    break;

                case 'executing':
                    document.getElementById('progressFill').style.width = '90%';
                    break;

                case 'complete':
                    document.getElementById('progressFill').style.width = '100%';
                    markAllCompleted();
                    displayResults(result, ticker);
                    eventSource.close();
                    resetButton();
                    break;

                case 'error':
                    showError(message);
                    eventSource.close();
                    resetButton();
                    break;
            }
        }

        function updateProgress(step, total) {
            const percentage = (step / total) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
        }

        function updateAgentStatus(agentName) {
            // Mark previous agents as completed
            document.querySelectorAll('.agent-status.active').forEach(el => {
                el.classList.remove('active');
                el.classList.add('completed');
            });

            // Mark current agent as active
            const agentKey = agents.find(a => a.name === agentName)?.key;
            if (agentKey) {
                const agentEl = document.getElementById(`agent-${agentKey}`);
                if (agentEl) {
                    agentEl.classList.add('active');
                }
            }
        }

        function markAllCompleted() {
            document.querySelectorAll('.agent-status').forEach(el => {
                el.classList.remove('active');
                el.classList.add('completed');
            });
        }

        function displayResults(result, ticker) {
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.classList.add('active');

            const { reports, trading_strategy, investment_plan, stock_chart_image } = result;
            
            // Determine recommendation
            const action = trading_strategy?.action || 'HOLD';
            const recommendationClass = action.toLowerCase();

            let html = `
                <div class="results-header">
                    <h2>Analysis Results for ${ticker}</h2>
                </div>

                <div class="recommendation ${recommendationClass}">
                    ${action === 'BUY' ? 'üìà' : action === 'SELL' ? 'üìâ' : '‚è∏Ô∏è'} 
                    Recommendation: ${action}
                </div>
            `;

            // Chart
            if (stock_chart_image) {
                html += `
                    <div class="chart-container">
                        <img src="${stock_chart_image}" alt="Stock Chart for ${ticker}" />
                    </div>
                `;
            }

            // Investment Plan
            if (investment_plan) {
                html += `
                    <div class="report-section">
                        <h3>üìã Investment Recommendation</h3>
                        <div class="report-content">${investment_plan}</div>
                    </div>
                `;
            }

            // Trading Strategy
            if (trading_strategy && Object.keys(trading_strategy).length > 0) {
                html += `
                    <div class="strategy-card">
                        <h3>‚ö° Trading Strategy</h3>
                        <div class="strategy-grid">
                            ${trading_strategy.entry_price ? `
                                <div class="strategy-item">
                                    <label>Entry Price</label>
                                    <value>$${trading_strategy.entry_price}</value>
                                </div>
                            ` : ''}
                            ${trading_strategy.take_profit ? `
                                <div class="strategy-item">
                                    <label>Take Profit</label>
                                    <value>$${trading_strategy.take_profit}</value>
                                </div>
                            ` : ''}
                            ${trading_strategy.stop_loss ? `
                                <div class="strategy-item">
                                    <label>Stop Loss</label>
                                    <value>$${trading_strategy.stop_loss}</value>
                                </div>
                            ` : ''}
                            ${trading_strategy.position_size_pct ? `
                                <div class="strategy-item">
                                    <label>Position Size</label>
                                    <value>${trading_strategy.position_size_pct}%</value>
                                </div>
                            ` : ''}
                        </div>
                        ${trading_strategy.rationale ? `
                            <div class="report-content" style="margin-top: 15px;">
                                <strong>Rationale:</strong> ${trading_strategy.rationale}
                            </div>
                        ` : ''}
                    </div>
                `;
            }

            // Individual Reports
            if (reports) {
                const reportMap = {
                    'fundamental_analyst': 'üìä Fundamental Analysis',
                    'technical_analyst': 'üìà Technical Analysis',
                    'sentiment_analyst': 'üí¨ Sentiment Analysis',
                    'news_harvester': 'üì∞ News Analysis'
                };

                Object.entries(reportMap).forEach(([key, title]) => {
                    if (reports[key]) {
                        html += `
                            <div class="report-section">
                                <h3>${title}</h3>
                                <div class="report-content">${reports[key]}</div>
                            </div>
                        `;
                    }
                });
            }

            resultsSection.innerHTML = html;
        }

        function showError(message) {
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.classList.add('active');
            resultsSection.innerHTML = `
                <div class="error-message">
                    <strong>‚ùå Error:</strong> ${message}
                </div>
            `;
        }

        function resetButton() {
            const btn = document.getElementById('analyzeBtn');
            btn.disabled = false;
            document.getElementById('btnText').style.display = 'inline';
            document.getElementById('btnSpinner').style.display = 'none';
        }

        // Allow Enter key to trigger analysis
        document.getElementById('tickerInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                startAnalysis();
            }
        });
    </script>


</body></html>